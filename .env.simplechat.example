# =============================================================================
# SimpleChat + Platform Engineering Copilot MCP Integration
# Environment Configuration
# =============================================================================
# Copy this file to .env and update with your actual values.
# =============================================================================

# -----------------------------------------------------------------------------
# Platform MCP Server Configuration
# -----------------------------------------------------------------------------

# SQL Server Password for MCP Database
PLATFORM_MCP_SA_PASSWORD=PlatformMcpDB123!

# MCP Server Settings
MCP_ENABLED=true
MCP_TIMEOUT_SECONDS=120
MCP_INTENT_THRESHOLD=0.6

# -----------------------------------------------------------------------------
# Azure Configuration (Shared by MCP and SimpleChat)
# -----------------------------------------------------------------------------

# Azure Subscription & Tenant
AZURE_SUBSCRIPTION_ID=your-subscription-id-here
AZURE_TENANT_ID=your-tenant-id-here

# Azure Service Principal (for MCP resource queries)
# Create: az ad sp create-for-rbac --name "platform-mcp-sp" --role Contributor
AZURE_CLIENT_ID=your-service-principal-client-id
AZURE_CLIENT_SECRET=your-service-principal-client-secret

# Azure Cloud Environment
AZURE_CLOUD_ENVIRONMENT=AzureGovernment  # or AzureCloud for commercial
AZURE_USE_MANAGED_IDENTITY=false
AZURE_ENABLED=true

# -----------------------------------------------------------------------------
# Azure OpenAI Configuration (Shared)
# -----------------------------------------------------------------------------

AZURE_OPENAI_API_KEY=your-openai-api-key-here
AZURE_OPENAI_ENDPOINT=https://your-openai.openai.azure.us/
AZURE_OPENAI_DEPLOYMENT=gpt-4o
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-4o
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002
AZURE_OPENAI_USE_MANAGED_IDENTITY=false

# -----------------------------------------------------------------------------
# SimpleChat Azure Services Configuration
# -----------------------------------------------------------------------------

# Azure Cosmos DB (for SimpleChat data storage)
# For production, use Azure Cosmos DB service endpoint
# For local dev with emulator, use: https://simplechat-cosmos:8081
SIMPLECHAT_COSMOS_ENDPOINT=https://your-cosmos-account.documents.azure.us:443/
SIMPLECHAT_COSMOS_KEY=your-cosmos-primary-key

# Azure AI Search (for SimpleChat RAG)
SIMPLECHAT_AI_SEARCH_ENDPOINT=https://your-search-service.search.azure.us/
SIMPLECHAT_AI_SEARCH_KEY=your-search-admin-key

# Azure Document Intelligence (for SimpleChat document processing)
SIMPLECHAT_DOCUMENT_INTELLIGENCE_ENDPOINT=https://your-doc-intelligence.cognitiveservices.azure.us/
SIMPLECHAT_DOCUMENT_INTELLIGENCE_KEY=your-doc-intelligence-key

# -----------------------------------------------------------------------------
# Azure AD Authentication (Optional - for CAC/PIV)
# -----------------------------------------------------------------------------

AZURE_AD_INSTANCE=https://login.microsoftonline.us/
AZURE_AD_TENANT_ID=your-tenant-id
AZURE_AD_CLIENT_ID=your-app-registration-client-id
AZURE_AD_CLIENT_SECRET=your-app-registration-secret
AZURE_AD_AUDIENCE=api://platform-engineering-copilot
AZURE_AD_REQUIRE_MFA=false
AZURE_AD_REQUIRE_CAC=false

# -----------------------------------------------------------------------------
# GitHub Configuration (Optional - for MCP GitHub integration)
# -----------------------------------------------------------------------------

GITHUB_TOKEN=your-github-token-here
GITHUB_API_BASE_URL=https://api.github.com
GITHUB_DEFAULT_OWNER=your-github-username-or-org
GITHUB_ENABLED=false

# -----------------------------------------------------------------------------
# Gateway Timeouts
# -----------------------------------------------------------------------------

GATEWAY_CONNECTION_TIMEOUT=60
GATEWAY_REQUEST_TIMEOUT=300

# -----------------------------------------------------------------------------
# NIST Controls Configuration (for Compliance Agent)
# -----------------------------------------------------------------------------

NIST_CONTROLS_BASE_URL=https://raw.githubusercontent.com/usnistgov/oscal-content/main/nist.gov/SP800-53/rev5/json
NIST_CONTROLS_TIMEOUT=60
NIST_CONTROLS_CACHE_DURATION=24
NIST_CONTROLS_MAX_RETRIES=3
NIST_CONTROLS_RETRY_DELAY=2
NIST_CONTROLS_OFFLINE_FALLBACK=true
NIST_CONTROLS_DETAILED_LOGGING=false

# -----------------------------------------------------------------------------
# Azure Storage (Optional - for MCP evidence storage)
# -----------------------------------------------------------------------------

AZURE_STORAGE_CONNECTION_STRING=

# =============================================================================
# Quick Start Instructions
# =============================================================================
#
# 1. Copy this file:
#    cp .env.simplechat .env
#
# 2. Update Azure credentials:
#    - AZURE_SUBSCRIPTION_ID
#    - AZURE_TENANT_ID
#    - AZURE_CLIENT_ID
#    - AZURE_CLIENT_SECRET
#    - AZURE_OPENAI_API_KEY
#    - AZURE_OPENAI_ENDPOINT
#
# 3. Configure SimpleChat services:
#    - SIMPLECHAT_COSMOS_ENDPOINT
#    - SIMPLECHAT_COSMOS_KEY
#    - SIMPLECHAT_AI_SEARCH_ENDPOINT
#    - SIMPLECHAT_AI_SEARCH_KEY
#
# 4. Start MCP server only:
#    docker-compose -f docker-compose.simplechat-integration.yml up -d platform-mcp
#
# 5. Verify MCP server:
#    curl http://localhost:5100/health
#
# 6. (Later) Start SimpleChat services:
#    docker-compose -f docker-compose.simplechat-integration.yml --profile simplechat up -d
#
# =============================================================================
